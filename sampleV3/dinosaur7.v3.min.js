let _D7_DEV_MODE="dev",_D7_BASE_URL="",_D7_DEFAULT_LAYOUT="",_D7_DEFAULT_EXTENSION="",_D7_ROUTE_MAP={};class D7App{constructor(){this._GLOBAL={},this._MOUNT_POINT=null,this._HIST_PAGE={}}setting=function(t){t||(t={}),_D7_DEV_MODE=t.devMode||_D7_DEV_MODE,_D7_BASE_URL=t.baseUrl||_D7_BASE_URL,_D7_DEFAULT_LAYOUT=t.defaultLayout||_D7_DEFAULT_LAYOUT,_D7_DEFAULT_EXTENSION=t.defaultExtension||_D7_DEFAULT_EXTENSION,this.topPage=t.topPage||window.location.href,this.routeDef=t.route||[]};start=async function(){for(const t of this.routeDef){const e=t.name.toUpperCase();D7Util.parseUrl(t.url);_D7_ROUTE_MAP[e]={name:t.name,path:D7Util.parseUrl(t.url).path,description:t.description},t.preload&&await D7Template.load(_D7_ROUTE_MAP[e].path)}let t=d7parseUrl(this.topPage);_D7_BASE_URL+t.path===D7Util.parseUrl(window.location.href).path&&d7error("Not specified topPage or d7page."),this._MOUNT_POINT=document.querySelector("[d7App]"),this._MOUNT_POINT||d7error("no [d7App] defined in root html."),this._MOUNT_POINT.innerHTML="";const e=await D7Page.load(t.path);await e.mount(t.query,this._MOUNT_POINT)};route=async function(t,e,r){const n=this._MOUNT_POINT.querySelector("[_d7page]").getAttribute("_d7page");this._HIST_PAGE[n]=this._MOUNT_POINT;const s=d7parseUrl(t);if(r&&this._HIST_PAGE[s.path])return this._MOUNT_POINT.replaceWith(this._HIST_PAGE[s.path]),void(this._MOUNT_POINT=document.querySelector("[d7App]"));const o=this._MOUNT_POINT.cloneNode(!0),i=o.querySelector("[d7page]");i?i.innerHTML="":o.innerHTML="",this._MOUNT_POINT.replaceWith(o),this._MOUNT_POINT=o;const a=await D7Page.load(s.path);return await a.mount({...s.query,...e},this._MOUNT_POINT)};modal=async function(t,e){return await D7Modal.load(d7parseUrl(t).path,e)};storeData=function(t,e){try{if(localStorage.setItem("dummytest","1"),"1"===localStorage.getItem("dummytest"))return void 0===e?localStorage.getItem(t):null!=e?localStorage.setItem(t,e):localStorage.removeItem(t)}catch(t){}if(void 0===e){var r={};return(document.cookie||"").split("; ").forEach((function(t){var e=t.split("=");r[e[0]]=decodeURIComponent(e[1])})),r[t]}var n=new Date;null!=e?n.setTime(n.getTime()+31536e6):n.setTime(n.getTime()-1e3),document.cookie=`${t}=${encodeURIComponent(e)}; expires=${n.toGMTString()}`}}const d7parseUrl=t=>{if((t=t.trim()).startsWith("/"))return D7Util.parseUrl(t);const e=D7Util.parseUrl("/"+t),r=_D7_ROUTE_MAP[e.path.substring(1).toUpperCase()];return r||d7error(`setting.route not defined. ${t}`),e.path=r.path,e},_D7_CACHE_PAGE={};class D7Page{constructor(t){this._COMP=t}static load=async t=>{let e=_D7_CACHE_PAGE[t];if(e)return e;const r=await D7Component.load(t,_D7_DEFAULT_LAYOUT);return e=new D7Page(r),_D7_CACHE_PAGE[t]=e,e};mount=async(t,e)=>{await this._COMP.mount(t,e),this._COMP._MOUNT_POINT.setAttribute("_d7page",this._COMP._PATH)}}const _D7_CACHE_LAYOUT={};class D7Layout{constructor(t){this._COMP=t}static load=async t=>{let e=_D7_CACHE_LAYOUT[t];if(e)return e;const r=await D7Component.load(t,"-BAN-");return e=new D7Layout(r),_D7_CACHE_LAYOUT[t]=e,e};mount=async(t,e)=>{await this._COMP.mount(t,e)}}class D7Modal{constructor(t){this._COMP=t;let e=document.createElement("div");e.innerHTML="<div class='d7_modal_overlay'><div class='d7_modal_form'></div></div>",this.form=e.querySelector(".d7_modal_form"),this.container=e.querySelector(".d7_modal_overlay"),this.form.onclick=function(t){t.stopPropagation()}}static load=async(t,e)=>{const r=await D7Component.load(t),n=new D7Modal(r);return r.close=t=>{n.close(),r.callParent&&r.callParent(t)},n.container.onclick=e?function(){n.close(),r.callParent&&r.callParent()}:function(){},n};open=async(t,e)=>{this._COMP.callParent=e,await this._COMP.mount(t,this.form),document.body.appendChild(this.container),this.container.classList.remove("d7_modal_overlay_closing"),setTimeout((function(t){t.classList.add("d7_modal_overlay_show")}),10,this.container)};close=()=>{this.container.classList.remove("d7_modal_overlay_show"),this.container.classList.add("d7_modal_overlay_closing"),setTimeout((function(t){document.body.removeChild(t)}),500,this.container)}}let _d7id=100;class D7Component{constructor(t,e,r){this.id=_d7id++,this._PATH=t,this._TEMPLATE=e,this._MOUNT_LAYOUT=null,this._MOUNT_POINT=null,this._DEFAULT_LAYOUT_URL=r}static load=async(t,e)=>{const r=await D7Template.load(t);return new D7Component(t,r,e)};mount=async(t,e)=>{this._MOUNT_LAYOUT=e,this._MOUNT_POINT=e,this._MOUNT_LAYOUT.style.display="none",this._initialized=!1,this._TEMPLATE.fnUserScript?(d7debug(`Running UserScript. d7${this.id} ${this._PATH}`),await this._TEMPLATE.fnUserScript.call(this,t,this)):(d7debug(`No UserScript defined. d7${this.id} ${this._PATH}`),await this.init({})),this.afterInit&&this.afterInit(this)};init=async function(t){const e=await this.mountLayout(t);for(var r=0;r<e.classList.length;r++){const t=e.classList[r];t.startsWith("_d7")&&!t.endsWith("c")&&e.classList.remove(t)}if(e.classList.add(`_d7${this.id}`),e.innerHTML=this._TEMPLATE.fnRender(t),this._TEMPLATE.fnStyle){var n=document.createElement("style");n.innerHTML=this._TEMPLATE.fnStyle(`._d7${this.id}`,`._d7${this.id}c`),e.insertBefore(n,e.firstChild)}this._TEMPLATE.fnBindEvent(e,this);var s=e.querySelectorAll("[d7Comp]");for(const t of s){t.classList.add(`_d7${this.id}c`);const e=d7parseUrl(t.getAttribute("d7Comp")),r=await D7Component.load(e.path);await r.mount(e.query,t)}this._initialized=!0,this._MOUNT_LAYOUT.style.display="block"};mountLayout=async function(t){if("-BAN-"===this._DEFAULT_LAYOUT_URL)return this._MOUNT_POINT;const e=this._TEMPLATE.getLayoutUrl(t)||this._DEFAULT_LAYOUT_URL,r=this._MOUNT_LAYOUT.getAttribute("_d7layout");if(!e||e===r){const t=this._MOUNT_LAYOUT.querySelector("[d7page]");return t&&(this._MOUNT_POINT=t),this._MOUNT_POINT}const n=d7parseUrl(e),s=await D7Layout.load(n.path);await s.mount(n.query,this._MOUNT_LAYOUT),this._MOUNT_LAYOUT.setAttribute("_d7layout",e);const o=this._MOUNT_LAYOUT.querySelector("[d7page]");return o||d7error("No [d7page] defined in layout. "+e),this._MOUNT_POINT=o};render=async function(t,e){this._initialized||d7error("Need to call d7.init() first."),"string"!=typeof t&&d7error("Need to specify selector.");const r=this._MOUNT_POINT.querySelector(t);r||d7error(`Target element not exists in Current DOM. ${t}`);const n=this._TEMPLATE.renderPart(t,e);r.innerHTML=n,this._TEMPLATE.fnBindEvent(r,this);var s=r.querySelectorAll("d7Comp");for(const t of s){const e=d7parseUrl(t.getAttribute("d7Comp")),r=await D7Component.load(e.path);await r.mount(e.query,t)}};collect=function(t){const e=this._MOUNT_DOM.s(t);e||d7error(`Target DOM not exists. ${t}`);const r={};var n=e.querySelectorAll("[d7key]");for(const t of n){const e=t.getAttribute("d7key").split(",");let n=e[0].trim();const s=e[1]?.trim()||null;let o=null;o=s?"text"===s||"innerHTML"===s?t.innerHTML:t.getAttribute(s):void 0!==t.value?t.value:t.innerHTML,n.endsWith("[]")?(n=n.substring(0,n.length-2),r[n]&&(r[n]=[]),r[n].push(o)):r[n]=o}return r};show=function(t){if(t)return this._MOUNT_POINT.style.display="block";this._MOUNT_POINT.style.display="none"};emitEvent=function(t,e,r){var n=this._MOUNT_POINT.querySelector(t);n||d7error("Target not found for [emitEvent]. "+t),e.startsWith("on")&&(e=e.substring(2)),n.dispatchEvent(new Event(e,r))};s=function(t,e){if(!t)return this._MOUNT_POINT;if(void 0===e)return this._MOUNT_POINT.querySelector(t);var r=this._MOUNT_POINT.querySelectorAll(t);return r.length<e+1?null:r[e]};S=function(t){return t?this._MOUNT_POINT.querySelectorAll(t):[this._MOUNT_POINT]}}const _D7_CACHE_TPLT={};class D7Template{constructor(t){const{layoutExpr:e,scriptCode:r,styleCode:n,templateDom:s}=d7analyze(t);this.fnRender=d7compileHtml(d7prepareHtml(s)),this.fnStyle=d7compileStyle(n);const o=Object.getPrototypeOf((async function(){})).constructor;r&&(this.fnUserScript=new o("query","d7",r)),this.fnBindEvent=function(t,e){t.querySelectorAll("[_d7event]").forEach((function(t){const r=t.getAttribute("_d7event"),n=r.indexOf(",");if(n<1)return;const s=r.substring(0,n).trim(),o=r.substring(n+1).trim();t.addEventListener(s,(function(t){new Function("e","d7",o)(t,e)}))}))},e&&(this.fnLayoutInfo=d7compileHtml(e)),this._TPLT_DOM=s,this._RENDER_PARTS={}}static load=async function(t){(t=_D7_BASE_URL+t).match(/\.\w+$/)||(t+=_D7_DEFAULT_EXTENSION);let e=_D7_CACHE_TPLT[t];if(e)return e;d7debug("loading html. "+t);let r=await D7Api.loadHtml(t);return e=new D7Template(r),_D7_CACHE_TPLT[t]=e,e};getLayoutUrl=function(t){return this.fnLayoutInfo?this.fnLayoutInfo(t):""};renderPart=function(t,e){let r=this._RENDER_PARTS[t];if(r)return r(e);const n=this._TPLT_DOM.querySelector(t);return n||d7error(`Target element not exists in TEMPLATE. ${t}`),r=d7compileHtml(n.innerHTML),this._RENDER_PARTS[t]=r,r(e)}}const _D7_LOGIC={start:"{[%",close:"%]}"},_D7_PRINT={start:"{%",close:"%}"},_D7_HTMLENCODE={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"," ":"&nbsp;","ã€€":"&emsp;"},_D7_CONTAINER_TYPE={CAPTION:"table",THEAD:"table",TFOOT:"table",TBODY:"table",TR:"table",COLGROUP:"table tr","COL: ":"table tr",TH:"table tr",TD:"table tr",LI:"ul",DT:"dl",DD:"dl",OPTION:"select",OPTGROUP:"select",AREA:"map",LEGEND:"fieldset"},d7escapeReg=function(t){return t.replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\\/g,"\\").replace(/\$/g,"\\$").replace(/\-/g,"\\-")},_D7_NL_REG_START=new RegExp(`(<!\\-\\-\\s*)?(${d7escapeReg(_D7_LOGIC.start)})`,"gm"),_D7_NL_REG_CLOSE=new RegExp(`(${d7escapeReg(_D7_LOGIC.close)})(\\s*\\-\\->)?`,"gm"),_D7_NL_REG_EVENT=new RegExp("\\s(onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup|onload|onunload|onfocus|onblur|onsubmit|onreset|onselect|onchange)=(\"|')","igm"),d7analyze=function(t){let e=t.match(/<\w+>/);e=e?e[0]:"div";var r=d7makeContainer(e);t=(t=(t=t.replace(_D7_NL_REG_START,(function(t,e,r){return"\x3c!-- "+r}))).replace(_D7_NL_REG_CLOSE,(function(t,e,r){return e+" --\x3e"}))).replace(_D7_NL_REG_EVENT,(function(t,e,r){return" _d7event="+r+e.substring(2)+","})),r.innerHTML=t;var n="",s="",o="";return r.querySelectorAll("[d7layout]").forEach((function(t){n=t.getAttribute("d7layout")||t.innerHTML,t.remove()})),r.querySelectorAll("[d7dummy]").forEach((function(t){t.remove()})),r.querySelectorAll("[d7comp]").forEach((function(t){t.innerHTML=""})),r.querySelectorAll("script").forEach((function(t){s+=t.innerHTML+"\n;\n;\n;",t.remove()})),r.querySelectorAll("style").forEach((function(t){o+=t.innerHTML+"\n\n\n",t.remove()})),{layoutExpr:n,scriptCode:s,styleCode:o,templateDom:r}},d7makeContainer=function(t){var e=document.createElement("div"),r=_D7_CONTAINER_TYPE[t.toUpperCase()];if(!r)return e;var n=r.split(" ");for(var s in n){var o=document.createElement(n[s]);e.append(o),e=o}return e},_D7_PL_REG_START=new RegExp(d7escapeReg(_D7_PRINT.start),"gm"),_D7_PL_REG_CLOSE=new RegExp(d7escapeReg(_D7_PRINT.close),"gm"),d7prepareHtml=function(t){let e,r=0;const n="_d7l0Gic",s={};t.querySelectorAll("[d7]").forEach((function(t){var o=t.getAttribute("d7").trim();t.removeAttribute("d7");var i=d7bracketsPos(o,0,"(",")");i||d7error("d7scanHtml: "+o);var a=o.substring(0,i[0]).trim(),l=o.substring(0,i[1]+1).trim(),c=o.substring(i[1]+1).trim();return e=`${n}${++r}E`,"if"===a?c.match(/^continue|break/)?(s[e]=`${_D7_LOGIC.start} ${o}; ${_D7_LOGIC.close}`,void t.before(e)):(s[e]=`${_D7_LOGIC.start} ${c.startsWith("{")?o:`${l}{${c}`} ${_D7_LOGIC.close}`,t.before(e),e=`${n}${++r}E`,s[e]=`${_D7_LOGIC.start} } ${_D7_LOGIC.close}`,void t.after(e)):"for"===a?(s[e]=`${_D7_LOGIC.start} ${c.startsWith("{")?o:`${l}{${c}`} ${_D7_LOGIC.close}`,t.before(e),e=`${n}${++r}E`,s[e]=`${_D7_LOGIC.start} } ${_D7_LOGIC.close}`,void t.after(e)):void d7error(`d7scanHtml: Not a legal [d7] expression: ${o}`)}));let o=t.innerHTML;for(e in s)o=o.replace(e,s[e]);return o},d7bracketsPos=function(t,e,r,n){if(!t)return null;let s=0,o=-1;const i=r.length,a=n.length;for(let l=e;l<t.length;l++)if(t.substring(l,l+i)===r&&(0===s&&(o=l),s++),t.substring(l,l+a)===n){if(1===s)return[o,l];s--}return null},_D7_RL_REG=new RegExp(`(${d7escapeReg(_D7_LOGIC.start)})([\\s\\S]*?)(${d7escapeReg(_D7_LOGIC.close)})`,"gm"),d7compileHtml=function(t){var e=(t=(t=(t=(t=(t=t.replace(_D7_NL_REG_START,(function(t,e,r){return r}))).replace(_D7_NL_REG_CLOSE,(function(t,e,r){return e}))).replace(_D7_PL_REG_START,(function(t,e){return _D7_LOGIC.start+"="}))).replace(_D7_PL_REG_CLOSE,(function(t,e){return _D7_LOGIC.close}))).replace(/[\r\n]/g,"").replace(/'/g,"\\'")).replace(_D7_RL_REG,(function(t,e,r,n){return(r=r.replace(/\\'/g,"'")).startsWith("=")?`' + (${r.substring(1)}) +'`:`'; ${r}; out+='`}));e=`var out=''; out+='${e}'; return out;`;try{return new Function("_m",e)}catch(t){d7error(t.message+"\n"+e)}},_D7_ST_REG=new RegExp("(.*?)(\\{.*?\\})","gm"),d7compileStyle=function(t){if(t){var e=(t=t.replace(/[\r\n]/g,"").replace(/'/g,"\\'")).replace(_D7_ST_REG,(function(t,e,r){return`out += scope + ' ${e=e.trim()}:not(' + exclusion + ' *) ${r}\\n';\n`}));e=`var out='';\n${e}\n return out;`;try{return new Function("scope","exclusion",e)}catch(t){d7error(t.message+"\n"+e)}}};var tmpDiv=document.createElement("div");tmpDiv.innerHTML="<div style='display:block' class='d7_processing_overlay'><div class='d7_processing_form'><span class='d7_processing'>processing</span></div></div>";const _d7_processing=tmpDiv.firstChild,d7processing=function(t){if(document.body)if(!1!==t)document.body.appendChild(_d7_processing);else try{return document.body.removeChild(_d7_processing)}catch(t){}},d7error=function(t){throw"dev"===_D7_DEV_MODE&&alert("[ERROR] "+t),new Error("[ERROR] "+t)},d7debug=function(t){"dev"===_D7_DEV_MODE&&console.log("[DEBUG] "+t)};class D7Api{static loadHtml=t=>new Promise(((e,r)=>{let n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){200==n.status?e(n.responseText):r(`loadHtml: ${t} status[${n.status}]`)},n.onerror=function(){r(`loadHtml: ${t} [onerror] occurred.`)},n.send()}));static loadHtmlSync=t=>{let e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200==e.status)return e.responseText;d7error(`loadHtml: ${t} status[${e.status}]`)};static get=function(t,e,r,n){return new Promise(((s,o)=>{r||(r={}),t=D7Util.stringifyUrl(t,e);const i=new XMLHttpRequest;for(var a in i.onload=function(){let e;if(i.getResponseHeader("Content-Type").toUpperCase().contains("JSON"))try{e=JSON.parse(xhr.responseText)}catch(t){n?n(t,xhr.responseText):d7error(t)}else e=xhr.responseText;if(200==i.status)return s(e);n?n("status",i.status):d7error(`Api error. GET ${t} status[${xhr.status}]`)},i.onerror=function(){n?n("onerror"):d7error(`Api error. GET ${t} [onerror] occurred.`)},i.open("GET",t),r)xhr.setRequestHeader(a,r[a]);i.send()}))};static post=function(t,e,r,n){return new Promise(((s,o)=>{r||(r={});const i=new XMLHttpRequest;for(var a in i.onload=function(){let e;if(i.getResponseHeader("Content-Type").toUpperCase().contains("JSON"))try{e=JSON.parse(xhr.responseText)}catch(t){n?n(t,xhr.responseText):d7error(t)}else e=xhr.responseText;if(200==i.status)return s(e);n?n("status",i.status):d7error(`Api error. POST ${t} status[${xhr.status}]`)},i.onerror=function(){n?n("onerror"):d7error(`Api error. POST ${t} [onerror] occurred.`)},i.open("POST",t),r["Content-Type"]||(r["Content-Type"]="application/json; charset=utf-8"),options.headers)xhr.setRequestHeader(a,r[a]);if(r["Content-Type"].toUpperCase().contains("JSON"))return i.send(JSON.stringify(e));i.send(e)}))};static put=function(t,e,r,n){return new Promise(((s,o)=>{r||(r={});const i=new XMLHttpRequest;for(var a in i.onload=function(){let e;if(i.getResponseHeader("Content-Type").toUpperCase().contains("JSON"))try{e=JSON.parse(xhr.responseText)}catch(t){n?n(t,xhr.responseText):d7error(t)}else e=xhr.responseText;if(200==i.status)return s(e);n?n("status",i.status):d7error(`Api error. PUT ${t} status[${xhr.status}]`)},i.onerror=function(){n?n("onerror"):d7error(`Api error. PUT ${t} [onerror] occurred.`)},i.open("PUT",t),r["Content-Type"]||(r["Content-Type"]="application/json; charset=utf-8"),options.headers)xhr.setRequestHeader(a,r[a]);if(r["Content-Type"].toUpperCase().contains("JSON"))return i.send(JSON.stringify(e));i.send(e)}))};static delete=function(t,e,r,n){return new Promise(((s,o)=>{r||(r={}),t=D7Util.stringifyUrl(t,e);const i=new XMLHttpRequest;for(var a in i.onload=function(){let e;if(i.getResponseHeader("Content-Type").toUpperCase().contains("JSON"))try{e=JSON.parse(xhr.responseText)}catch(t){n?n(t,xhr.responseText):d7error(t)}else e=xhr.responseText;if(200==i.status)return s(e);n?n("status",i.status):d7error(`Api error. DELETE ${t} status[${xhr.status}]`)},i.onerror=function(){n?n("onerror"):d7error(`Api error. DELETE ${t} [onerror] occurred.`)},i.open("DELETE",t),r)xhr.setRequestHeader(a,r[a]);i.send()}))}}Element.prototype.s=function(t,e){if(!t)return this;if("undefined"==typeof tarNo)return this.querySelector(t);var r=this.querySelectorAll(t);return r.length<e+1?null:r[e]},Element.prototype.S=function(t){return t?this.querySelectorAll(t):[this]},Element.prototype.getVal=function(){if(this.hasAttribute("d7key")){const t=this.getAttribute("d7key").split(","),e=t[1]?.trim()||null;if(e)return"text"===e||"innerHTML"===e?this.innerHTML:this.getAttribute(e)}return void 0!==this.value?this.value:this.innerHTML},Element.prototype.setVal=function(t){if(this.hasAttribute("d7key")){const e=this.getAttribute("d7key").split(","),r=e[1]?.trim()||null;if(r)return"text"===r||"innerHTML"===r?(this.innerHTML=t,this):this.getAttribute(r)}return void 0!==this.value?(this.value=t,this):(this.innerHTML=t,this)},Element.prototype.getAttr=function(t){return this.hasAttribute(t)?this.getAttribute(t)||"":null},Element.prototype.setAttr=function(t,e){return this.setAttribute(t,e),this},Element.prototype.rmvAttr=function(t){return this.removeAttribute(t),this},Element.prototype.getStyle=function(t){if(t)return this.style[t];var e={};return(this.style.cssText||"").split(";").forEach((function(t){var r=t.split(":");r.length<2||(e[r[0].trim()]=r[1].trim())})),e},Element.prototype.setStyle=function(t,e){if("string"==typeof t)return this.style[t]=e,this;for(var r in t)this.style[r]=t[r];return this},Element.prototype.rmvStyle=function(t){return this.style[t]=null,this},Element.prototype.getClass=function(t){if(t)return this.classList.contains(t)?t:null;t=[];for(var e=0;e<this.classList.length;e++)t.push(this.classList[e]);return t},Element.prototype.setClass=function(t){if("string"==typeof t)return this.classList.add(t),this;for(var e=0;e<t.length;e++)this.classList.add(t[e]);return this},Element.prototype.rmvClass=function(t){if("string"==typeof t)return this.classList.remove(t),this;for(var e=0;e<t.length;e++)this.classList.remove(t[e]);return this};class D7Util{static equals=function(t,e){if(typeof t!=typeof e)return!1;const r=Object.keys(t);if(r.length>0){if(r.length!==Object.keys(e).length)return!1;for(const n in r)if(t[r[n]]!==e[r[n]])return!1;return!0}return t==e};static parseUrl=function(t){var e={};t=t.startsWith("http")?t:"http://test.com"+t;const r=new URL(t);return new URLSearchParams(r.search).forEach((function(t,r){e[r]=t})),{path:r.pathname,query:e,origin:r.origin}};static stringifyUrl=function(t,e){return e&&Object.keys(e).length?t+"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&"):t};static encodeHtml=function(t){return t=(t=t||"").replace(/./g,(function(t){return _D7_HTMLENCODE[t]||t}))};static stringifyJson=function(t){return JSON.stringify(t)};static parseJson=function(t){return JSON.parse(t)};static format=function(t,e,r){if("comma"===e)return"string"==typeof t&&(t=Number(t)),t.toLocaleString()+(r||"");if(t=t.replaceAll(" ",""),"date"===e){if(t.length>7)return t.substring(0,4)+r+t.substring(4,6)+r+t.substring(6,8);error("wrong date value. "+t)}if("datetime"===e){if(t.length>13)return t.substring(0,4)+r+t.substring(4,6)+r+t.substring(6,8)+" "+t.substring(8,10)+":"+t.substring(10,12)+":"+t.substring(12,14);error("wrong datetime value. "+t)}if("time"===e){if(t.length>13)return t.substring(8,10)+":"+t.substring(10,12)+":"+t.substring(12,14);if(t.length>5)return t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6);error("wrong time value. "+t)}error("wrong format."+e)}}D7Component.prototype.api=D7Api,D7Component.prototype.util=D7Util;const d7App=new D7App,d7app=d7App;!function(t){if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",(function(){d7App.start()}));else d7App.start()}();
